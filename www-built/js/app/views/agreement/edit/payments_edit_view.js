define(["backbone","handlebars","underscore","marionette","text!templates/agreement/edit/payment_edit_tpl.html","views/agreement/edit/payment_item_view","views/agreement/payment_item_view"],function(e,t,n,r,i,s,o){var u=e.Marionette.CompositeView.extend({template:t.compile(i),itemView:s,itemViewContainer:"ul",initialize:function(){this.collection=this.model.get("payments")},events:{"click #addMoreButton":"addMilestone"},getItemView:function(e){var t=e.get("currentStatus");return!t||t.get("action")!=="accepted"&&t.get("action")!=="submitted"?s:o},addMilestone:function(e){this.collection.add({amount:0,title:"New Milestone"})}});return u});