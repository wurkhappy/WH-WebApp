define(["backbone","handlebars","text!templates/agreement/agreement_submit_modal.html"],function(e,t,n){var r=e.View.extend({template:t.compile(n),initialize:function(e){this.render()},render:function(){this.$el.html(this.template(this.model.toJSON()))},events:{"click #submit-button":"submit","blur textarea":"addMessage","blur input":"addRecipient"},addRecipient:function(e){this.model.set("clientEmail",e.target.value)},addMessage:function(e){this.message=e.target.value},submit:function(e){if(!this.model.get("clientID")&&!this.model.get("clientEmail"))return;var t=this;this.model.save({},{success:function(e,n){t.model.submit(t.message,function(){t.trigger("hide"),window.location="/home"})}});var n=function(){$(".notification_container").fadeIn("fast"),$(".notification_text").text("Agreement submitted and email sent")};$(".notification_container").hover(function(){$(".notification_container").fadeOut("fast")});var r=_.debounce(n,300);this.trigger("hide"),r()}});return r});