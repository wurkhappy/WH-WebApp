define(["backbone","handlebars","noty","noty-inline","noty-default","views/agreement/read/header_states/base_state","text!templates/agreement/accept_tpl.html","views/agreement/read/modals/reject","views/ui-modules/modal"],function(e,t,n,r,i,s,o,u,a){var f=e.View.extend({payTemplate:t.compile(o),initialize:function(e){this.button1Title=this.userIsClient?"Accept "+this.statusType:"Waiting for Response",this.user=e.user,this.user.get("cards").fetch(),this.user.get("bank_accounts").fetch(),this.otherUser=e.otherUser,this.render()},render:function(){var e=this.model.get("amount"),t=e,n=this.user.get("cards").toJSON(),r=this.user.get("bank_accounts").toJSON();this.$el.html(this.payTemplate({milestonePayment:e,amountTotal:t,creditCards:n,bankAccounts:r})),$(".payment_select_container").hide()},events:{"click #accept-button":"acceptRequest","click .select_radio":"selectPaymentMethod"},paymentTotal:function(e,t){return e-t},selectPaymentMethod:function(e){var t=$(e.target),n=t.val();$(".payment_select_container").not("#"+n).slideUp("fast"),$("#"+n).slideDown("fast")},acceptRequest:function(e){var t=$(".select_bank_account:checked").val()||$(".select_credit_card:checked").val()||"";this.model.accept(t);var n;this.statusType?n=this.statusType:n="";var r=function(){$("#notification_container").fadeIn("fast"),$("#notification_text").text("Request "+n+" and email sent")};$("#notification_container").hover(function(){$("#notification_container").fadeOut("fast")});var i=_.debounce(r,300);this.trigger("hide"),i()}});return f});