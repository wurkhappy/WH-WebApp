define(["backbone","handlebars","noty","noty-inline","noty-default","text!templates/agreement/read/header_tpl.html","views/agreement/read/header_states/accepted_state","views/agreement/read/header_states/created_state","views/agreement/read/header_states/submitted_state","views/agreement/read/header_states/rejected_state","views/agreement/read/header_states/draft_state"],function(e,t,n,r,i,s,o,u,a,f,l){var c=e.View.extend({template:t.compile(s),initialize:function(e){this.listenTo(this.model,"change:currentStatus",this.changeState),this.user=e.user,this.otherUser=e.otherUser,this.changeState(),console.log(this.model)},render:function(){var e,t=this.model.get("currentStatus");return t!==null?this.state.button1Title===t.StatusWaiting&&(e=!0):e=!1,this.$el.html(this.template({model:this.model.toJSON(),button1Title:this.state.button1Title,button2Title:this.state.button2Title,waiting:e})),this},events:{"click #action-button1":"button1","click #action-button2":"button2"},button1:function(e){this.state.button1()},button2:function(e){this.state.button2()},changeState:function(){if(this.model.get("draft")){this.state=new l({model:this.model}),this.render();return}var e=this.model.get("currentStatus");switch(e.get("action")){case e.StatusCreated:this.state=new u({model:this.model});break;case e.StatusSubmitted:this.state=new a({model:this.model,user:this.user,otherUser:this.otherUser});break;case e.StatusAccepted:this.state=new o({model:this.model,user:this.user});break;case e.StatusRejected:this.state=new f({model:this.model});break;default:}this.render()}});return c});