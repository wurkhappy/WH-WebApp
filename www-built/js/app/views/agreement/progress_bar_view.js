define(["backbone","handlebars","underscore","marionette","text!templates/agreement/agreement_progress_bar_tpl.html"],function(e,t,n,r,i){t.registerHelper("adjustIconColor",function(e){return e==="submitted"?"yellow_progress":e==="accepted"?"green_progress":e==="rejected"?"red_progress":"grey_progress"}),t.registerHelper("midpoint",function(e,t){var n=t.payments.length;return n%2!=0||e!=n/2&&e!=n-.5?"":'<i class="fa fa-circle progress_icon" style="opacity:0;"></i>'});var s=e.View.extend({template:t.compile(i),initialize:function(e){this.payments=e.model.get("payments"),this.listenTo(this.payments,"change",this.render)},render:function(){var e=this.payments,t=e.getNumberOfSubmittedPayments(),n=e.getAcceptedPayments(),r=t+n,i=this.payments.length,s=this.calculatePercentage(i,r);return this.$el.html(this.template({payments:this.payments.toJSON(),percentComplete:s})),this.afterRender(),this},afterRender:function(){var e=30,t=this.payments,r=t.length,i=r%2==0?3:2,s=(r+i-1)*e;n.defer(function(){var t=900-s,n=$(".progress_icon"),o=t/(r+i-1);$(".progress_icon").css({"margin-left":o/2+"px","margin-right":o/2+"px"}),$(".progress_icon").first().css("margin-left",-(e/2)+"px"),$(".progress_icon").last().css("margin-right","0px"),$("progress").addClass("yellow_progress")})},calculatePercentage:function(e,t){var n=100,r=e%2==0?3:2,i=e+r-1;return t<1?0:t===e?100:n/i*t}});return s});