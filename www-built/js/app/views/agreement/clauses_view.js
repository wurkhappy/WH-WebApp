define(["backbone","handlebars","text!templates/agreement/clauses_tpl.html"],function(e,t,n){var r=e.View.extend({template:t.compile(n),initialize:function(e){this.collection.each(function(t){var n=t.attributes.userID===e.user.id?e.user.toJSON():e.otherUser.toJSON(),r=n.firstName?n.firstName+" "+n.lastName:n.email;t.attributes.text=t.attributes.text.replace(/I\ am/g,r+" is")})},render:function(){return this.$el.html(this.template({clauses:this.collection.toJSON()})),this}});return r});