define(["backbone","handlebars","parsley","text!templates/landing/login.html","models/user"],function(e,t,n,r,i){var s=e.View.extend({template:t.compile(r),model:new i,events:{"blur input":"updateModel","click input[type=submit]":"submitModel","keypress input":"submitOnEnter"},initialize:function(){this.model.url="/user/login",this.render()},render:function(){return $(this.el).html(this.template()),this},updateModel:function(e){this.model.set(e.target.name,e.target.value)},submitOnEnter:function(e){if(e.keyCode!=13)return;this.updateModel(e),this.submitModel(e)},submitModel:function(e){e.preventDefault(),e.stopPropagation(),this.model.save({},{success:function(e,t){t.redirectURL&&(window.location=t.redirectURL)},error:function(e,t){}})}});return s});