define(["jquery","backbone","handlebars","text!templates/account/new_bank_account_tpl.html"],function(e,t,n,r){var i=t.View.extend({template:n.compile(r),events:{"blur input":"updateFields","click #save-button":"saveBankAccount","change select":"updateFields"},initialize:function(e){this.user=e.user;if(this.user.get("firstName"))var t=this.user.attributes.firstName+" "+this.user.attributes.lastName;this.account={name:t,type:"checking"},console.log(this.user),this.render()},render:function(){return this.$el.html(this.template(this.account)),this},updateFields:function(t){this.account[t.target.name]=t.target.value,e(".notification_container").fadeOut("slow")},saveBankAccount:function(t){t.preventDefault();var n=this;balanced.bankAccount.create(this.account,function(t){if(t.status===201){delete t.data.id;var r=new n.user.attributes.bank_accounts.model(t.data);n.user.get("bank_accounts").add(r),r.save(),n.$("input").val(""),e(".notification_container").fadeOut("fast").fadeIn("slow"),n.account={type:"checking"}}else console.log(t)})}});return i});