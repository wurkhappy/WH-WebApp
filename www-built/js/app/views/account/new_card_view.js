define(["jquery","backbone","handlebars","text!templates/account/new_card_tpl.html"],function(e,t,n,r){var i=t.View.extend({template:n.compile(r),events:{"blur input":"updateFields","click #save-button":"saveCard","change select":"updateFields"},initialize:function(e){this.render(),this.card={expiration_month:1,expiration_year:2013},this.user=e.user,console.log(this.user)},render:function(){return this.$el.html(this.template()),this},updateFields:function(t){this.card[t.target.name]=t.target.value,e(".notification_container").fadeOut("slow")},saveCard:function(t){var n=this;balanced.card.create(this.card,function(t){if(t.status===201){delete t.data.id,console.log(t);var r=new n.user.attributes.cards.model(t.data);console.log(_.clone(r)),n.user.get("cards").add(r),console.log(n.user.get("cards")),r.save(),e("input").val(""),e(".notification_container").fadeOut("fast").fadeIn("slow")}else console.log(t)})}});return i});