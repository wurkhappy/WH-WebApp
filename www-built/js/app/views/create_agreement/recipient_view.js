define(["backbone","handlebars","underscore","text!templates/create_agreement/send_tpl.html"],function(e,t,n,r){var i=e.View.extend({className:"clear white_background",attributes:{id:"content"},template:t.compile(r),initialize:function(e){this.router=e.router,this.render()},render:function(){return this.$el.html(this.template()),this},events:{"blur input, textarea":"updateField","click .submit-buttons > a":"saveAndSendAgreement","mouseenter .create_agreement_navigation_link":"mouseEnterNavigation","mouseleave .create_agreement_navigation_link":"mouseLeaveNavigation","click .create_agreement_navigation_link":"showPage"},updateField:function(e){this.model.set(e.target.name,e.target.value)},saveAndSendAgreement:function(e){e.preventDefault(),e.stopPropagation(),this.model.set("draft",!1),this.model.save({},{success:n.bind(function(e,t){$(".notification_container").fadeIn("fast");var r=function(){window.location="/home"},i=n.debounce(r,800);this.model.submit(this.model.get("message"),i)},this)})},showPage:function(e){$(e.currentTarget).find("h2").removeClass("create_agreement_navigation_link_hover"),e.preventDefault(),e.stopPropagation();var t=$(e.currentTarget).attr("href");this.model.save({},{success:n.bind(function(e,n){this.router.navigate(t,{trigger:!0})},this)})},mouseEnterNavigation:function(e){$(e.currentTarget).find("h2").addClass("create_agreement_navigation_link_hover")},mouseLeaveNavigation:function(e){$(e.currentTarget).find("h2").removeClass("create_agreement_navigation_link_hover")}});return i});