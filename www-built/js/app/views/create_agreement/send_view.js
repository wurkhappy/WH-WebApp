define(["backbone","handlebars","text!templates/create_agreement/send_tpl.html","views/agreement/edit/payments_edit_view"],function(e,t,n,r){var i=e.View.extend({template:t.compile(n),className:"clear white_background",events:{"click #sendAgreement":"sendAgreement","blur textarea":"addMessage","blur input":"addRecipient"},initialize:function(){this.render(),this.message="Please take a moment to look over the details of the services provided, refund policies and payment schedule to confirm that's what you want to do and you're comfortable with the agreement."},render:function(){this.$el.html(this.template({message:this.message}))},sendAgreement:function(e){e.preventDefault(),e.stopPropagation();if(!this.model.get("clientID")&&!this.model.get("clientEmail"))return;var t=this;this.model.save({},{success:function(e,n){$(".notification_container").fadeIn("fast");var r=function(){window.location="/home"},i=_.debounce(r,800);t.model.submit(t.message,i)}})},addRecipient:function(e){this.model.set("clientEmail",e.target.value)},addMessage:function(e){this.message=e.target.value}});return i});